{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "height":400,
    "width":"container",
    "background":"white",
    "title": {
        "text":"English Proficiency Level Among Non-English Language Speakers",
        "fontSize":14
    },
    "description": "Dot plot showing English proficiency levels of other language speakers",
    "data": {
        "url": "https://raw.githubusercontent.com/mkee0011/3179/main/data_vis_2_final/data/eng_prof_by_state.csv"
    },
    "transform": [
        {"calculate": "datum.speakers/datum.state_pop*100","as":"prop_of_pop"},
        {"calculate": "datum.proficiency == 'other_lang_and_speaks_English_Not_at_all' ? 'Not At All' : datum.proficiency == 'other_lang_and_speaks_English_Not_well' ? 'Not Well' : datum.proficiency == 'other_lang_andspeaks_English_Well' ? 'Well' : datum.proficiency == 'other_lang_and_speaks_English_Very_well' ? 'Very Well': datum.proficiency","as": "eng_proficiency_label"}  ,
        {"calculate": "datum.state == 'Australian Capital Territory' ? 'ACT' : datum.state == 'New South Wales' ? 'NSW' : datum.state == 'Victoria' ? 'VIC' : datum.state == 'Queensland' ? 'QLD' : datum.state =='Western Australia' ? 'WA' : datum.state == 'Northern Territory' ? 'NT' : datum.state=='South Australia' ? 'SA' : datum.state == 'Tasmania' ? 'TAS' : datum.state","as":"state"} 
    ],
    "mark":{
        "type": "point",
        "filled": true,
        "size":150
    },
    "encoding": {
        "x":{
            "field":"state",
            "type":"nominal",
            "axis":{
                "title":"State",
                "labelAngle":0}
        },
        "y":{
            "field":"prop_of_pop",
            "type":"quantitative",
            "axis":{"title":"% of Population"}
        },
        "color":{
            "field":"eng_proficiency_label",
            "type":"nominal",
            "legend":{
                "title": "English Proficiency Level",
                "orient":"bottom"
            },
            "sort":["Very Well","Well","Not Well","Not At All"],
            "scale":{
                "domain":["Very Well","Well","Not Well","Not At All"],
                "range":["#1a9641","#a6d96a","#fdae61","#d7191c"]
            }
        },
        "tooltip": [
            {"field": "state", "type": "nominal", "title": "State"},
            {"field":"eng_proficiency_label","type":"nominal","title":"English Proficiency Level"},
            {"field": "prop_of_pop", "type": "quantitative", "format":".1f","title":"% of State Population"}
            ]
    }
}